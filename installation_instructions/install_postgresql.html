<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Installation Instructions for Movement Data workshop</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="http://ase-research.org/R/rmd.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Installation Instructions for Movement Data workshop</h1>
</div>
<div id="TOC">
<ul>
<li><a href="#postgresqlpostgis">PostgreSQL/PostGIS</a><ul>
<li><a href="#windowsos-x-users">Windows/OS X Users</a></li>
<li><a href="#linux">Linux</a><ul>
<li><a href="#option-1">Option 1</a></li>
<li><a href="#option-2-tested-on-ubuntudebian">Option 2 (tested on Ubuntu/Debian)</a></li>
<li><a href="#linux-user-instructions">Linux user instructions</a></li>
</ul></li>
<li><a href="#verify-your-postgresqlpostgis-installation">Verify your PostgreSQL/PostGIS installation</a></li>
</ul></li>
<li><a href="#qgis-gdal">QGIS + GDAL</a><ul>
<li><a href="#windows">Windows</a></li>
<li><a href="#os-x">OS X</a></li>
<li><a href="#linux-ubuntudebian">Linux (Ubuntu/Debian)</a></li>
</ul></li>
<li><a href="#r-rstudio">R / RStudio</a><ul>
<li><a href="#install-r">Install R</a><ul>
<li><a href="#for-those-updating-r-copying-packages-from-the-old-version">For those updating R: copying packages from the old version</a></li>
</ul></li>
<li><a href="#installupdate-rstudio">Install/update RStudio</a></li>
<li><a href="#install-r-packages-for-the-workshop">Install R packages for the workshop</a><ul>
<li><a href="#connection-between-postgis-and-r">Connection between PostGIS and R</a></li>
<li><a href="#movement-ecology-in-r">Movement ecology in R</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<p>This page gives instructions to install the latest versions of the necessary software for the workshop:</p>
<ul>
<li>PostgreSQL v9.5</li>
<li>PostGIS v2.2</li>
<li>GDAL v2.1</li>
<li>QGIS 2.1</li>
<li>R v3.3</li>
<li>RStudio v0.99</li>
</ul>
<h2 id="postgresqlpostgis">PostgreSQL/PostGIS</h2>
<p><strong><em>If you already have PostgreSQL installed</em></strong>: if you installed using the EnterpriseDB process below, use the Application Stack Builder to check/update your PostgreSQL/PostGIS versions to 9.5+ and 2.2+, respectively. If your PostgreSQL version is up-to-date but you need to update pgAdmin3, find the newest version <a href="http://www.pgadmin.org/download/index.php">here</a>.</p>
<h3 id="windowsos-x-users">Windows/OS X Users</h3>
<p>Start your installation by downloading the latest stable (non-beta) version (currently 9.5.x) for your system from <a href="http://www.enterprisedb.com/products-services-training/pgdownload">EnterpriseDB</a>, and follow the instructions. Note that the version in the screenshots below is 9.4, your version will likely be newer (9.5 or above). Run through the installation wizard for PostgreSQL.</p>
<p><img src="images/02-Wizard-start.png" alt="02-Wizard_start" /></p>
<p>You can accept all defaults during the installation, but <strong>make sure to remember the password</strong> you assign to the superuser (postgres)! You will need this to login to the database server. Once PostreSQL is installed, you also have to install PostGIS and psqlODBC drivers, as shown in the screenshots below.</p>
<p><img src="images/09-Wizard-end.png" alt="09-Wizard_end" /> <img src="images/10-Stackbuilder.png" alt="10-Stackbuilder" /></p>
<p><em>Note</em>: Your PostGIS version will be newer (likely 2.2) than shown in the image below.</p>
<p><img src="images/11-Addons-selection.png" alt="11-Addons_selection" /></p>
<p>Run through the installations psqlODBC and PostGIS, allowing PostGIS to set the environmental variables and out-of-db rasters. Once finished with the installs, skip to the section below on <a href="#post4">verifying your install</a>.</p>
<h3 id="linux">Linux</h3>
<h4 id="option-1">Option 1</h4>
<p>Start your installation by downloading the latest stable (non-beta) version (currently 9.5.x) for your system from <a href="http://www.enterprisedb.com/products-services-training/pgdownload">EnterpriseDB</a>, and follow the instructions.</p>
<p>To start the installer, open a terminal and log into root: <code>su root</code>.</p>
<p>Then simply run the downloaded file, and follow the instructions in the terminal.</p>
<p>See below for user setup instructions.</p>
<h4 id="option-2-tested-on-ubuntudebian">Option 2 (tested on Ubuntu/Debian)</h4>
<p><em>Note</em>: using this option, postgresql/postgis versions may vary depending on your Linux distribution and version.</p>
<p>Update the package manager and install postgresql:</p>
<pre><code>sudo apt-get update
sudo apt-get install postgresql-9.5 postgresql-client-9.5</code></pre>
<p>Then install Postgis and pgAdmin3:</p>
<pre><code>sudo apt-get install postgis pgadmin3</code></pre>
<h4 id="linux-user-instructions">Linux user instructions</h4>
<p>The postgresql installation creates a new user, postgres. If you want to log in using your system user credentials, you can create a database user/role with the same name (and password) using the <a href="http://www.postgresql.org/docs/9.1/static/app-createuser.html">createuser</a> command in the terminal.</p>
<p>First, switch to the root, and then postgres user:</p>
<pre><code>su root
su postgres</code></pre>
<p>Then create the new user and follow the instructions. If you are the primary database user it is recommended to match the username/password to your Linux username/password, make them a superuser, and allow them to create databases and roles. Then you can log in to the database with the same credentials you use for Linux.</p>
<pre><code>createuser --interactive -P
Enter name of role to add: user1
Shall the new role be a superuser? (y/n) y
Shall the new role be allowed to create databases? (y/n) y
Shall the new role be allowed to create more new roles? (y/n) y</code></pre>
<h3 id="verify-your-postgresqlpostgis-installation">Verify your PostgreSQL/PostGIS installation</h3>
<p>Once finished with the install, open up the program pgAdmin3:</p>
<p><img src="images/pg1.png" alt="pg1" /></p>
<p>Right click on the the server <code>PostgreSQL 9.5 (localhost:5432)</code>, and click Connect. Now you will log in as the <code>postgres</code> user, using the password you assigned in the install process.</p>
<p>Once you are connected, expand ‘Databases’ and click on the <code>postgres</code> database (this is a default database created with the installation process). With it highlighted, open up an SQL window by clicking on the SQL button.</p>
<p><img src="images/pg2.png" alt="pg2" /></p>
<p>Now type the commands as shown below in the SQL window, and then click the ‘Execute query’ button. If you see a result (in the Output pane of the SQL window) similar to that shown in the example below, you have successfully installed PostGIS! If you receive any errors, go back to the Stack Builder (as described above) and check your installed software, and if necessary install/update PostGIS.</p>
<p><img src="images/pg3.png" alt="pg3" /></p>
<h2 id="qgis-gdal">QGIS + GDAL</h2>
<h3 id="windows">Windows</h3>
<p>Windows users can install both QGIS and GDAL with the OSGeo4w installer. Download the network installer <a href="https://trac.osgeo.org/osgeo4w/">here</a>, and run it, selecting the <em>Express Desktop Install</em>, then install QGIS and GDAL (you can un-select the other options).</p>
<h3 id="os-x">OS X</h3>
<p>You can download and run the “Current” version QGIS installer from <a href="http://www.kyngchaos.com/software/qgis">here</a>. This .dmg file includes a set of four packages (inlcluding GDAL complete) which need to be installed, the last of which is QGIS.</p>
<h3 id="linux-ubuntudebian">Linux (Ubuntu/Debian)</h3>
<p>GDAL and other necessary packages can be installed from the repository using the package manager:</p>
<pre><code>sudo apt-get install gdal-bin
sudo apt-get install libproj-dev
sudo apt-get install libgdal-dev</code></pre>
<p>To install QGIS, it is recommended to follow the instructions <a href="https://www.qgis.org/en/site/forusers/alldownloads.html#linux">here</a> specific to your distribution.</p>
<h2 id="r-rstudio">R / RStudio</h2>
<p><strong><em>If you already have R installed</em></strong>: it is recommended to update your R version for this workshop, so that everyone is using a newer version (3.3.0 or above at this time) for the workshop. To check the version you are using, run the command <code>R.Version()$version.string</code> in R. On Windows and OS X, the preferred method to update R is to uninstall R first, using the typical uninstall method for your system (e.g, in Windows, go to Control Panel -&gt; Programs and Features). Your installed packages should not be deleted during the install, and you can transfer them to the new version using the method described further below.</p>
<h3 id="install-r">Install R</h3>
<p>Installers for all systems can be found at <a href="https://cran.rstudio.com/">here</a>, which will guide you through the install process.</p>
<p>Once the new version is installed, open it and try to install a package (e.g., run <code>install.packages('raster')</code>). R will ask you to create a new folder to store user packages, if you don’t have permissions on the default package library. Note the location of the new folder R creates, install the package, and then close R. If this is a new install of R, you can skip to the RStudio section.</p>
<h4 id="for-those-updating-r-copying-packages-from-the-old-version">For those updating R: copying packages from the old version</h4>
<p>If you had a user library for your packages from the previous version and want to use them in the new version, locate the folder containing these packages (e.g., in Windows, it is generally found at <code>C:\Users\YOUR_USERNAME\Documents\R\win-library\x.x</code>, where the new one should also be). Copy the packages from the this folder to the new version’s folder. Then open R, and run <code>update.packages(checkBuilt=TRUE, ask=FALSE)</code> to update these packages to their newest versions. If R is not finding your new user library, you can also check/set all the folders R looks for packages in by running <code>.libpaths()</code>).</p>
<h3 id="installupdate-rstudio">Install/update RStudio</h3>
<p>Installers for Windows, OS X, and several Linux distributions are available <a href="https://www.rstudio.com/products/rstudio/download/">here</a>. Even if you already have RStudio installed, it is recommended to download the newest version, which will work best with the newest R version. There is no need to uninstall the previous version first.</p>
<h3 id="install-r-packages-for-the-workshop">Install R packages for the workshop</h3>
<p>To start with, the <code>devtools</code> package will be necessary to install packages developed in the lab. Install it first by opening R, and then typing in the command line:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</code></pre>
<h4 id="connection-between-postgis-and-r">Connection between PostGIS and R</h4>
<p>To connect PostGIS and R, four packages are useful:</p>
<ul>
<li><code>RPostgreSQL</code>: provides a standard connection from R to PostgreSQL;</li>
<li><code>rgdal</code>: access to the GDAL library from R;</li>
<li><code>rgeos</code>: access to the GEOS library from R;</li>
<li><code>rpostgis</code>: various functions to interact between R and PostGIS.</li>
</ul>
<p>To install them, open R, and type in the command line:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;RPostgreSQL&quot;</span>, <span class="st">&quot;rgdal&quot;</span>, <span class="st">&quot;rgeos&quot;</span>))
<span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">&quot;mablab/rpostgis&quot;</span>)</code></pre>
<p>Run <code>install.packages('rgdal','rgeos')</code> in R to install or update the two packages. After installation, load each library:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rgdal)
<span class="kw">library</span>(rgeos)</code></pre>
<p>Note the messages after loading each package. If GDAL and GEOS (two system packages for handling GIS data which were installed in the steps above) are installed correctly, after loading <code>rgdal</code>, you should see something like:</p>
<pre><code>rgdal: version: 1.1-7, (SVN revision 612)
 Geospatial Data Abstraction Library extensions to R successfully loaded
 Loaded GDAL runtime: GDAL 2.0.1, released 2015/09/15</code></pre>
<p>And something like this after loading <code>rgeos</code>:</p>
<pre><code>rgeos version: 0.3-19, (SVN revision 524)
 GEOS runtime version: 3.5.0-CAPI-1.9.0 r4084 
 Linking to sp version: 1.2-3 
 Polygon checking: TRUE</code></pre>
<p>If the GDAL or GEOS packages are missing, they will need to be installed for the R packages to work correctly. For troubleshooting OS X issues, see the instructions <a href="http://tlocoh.r-forge.r-project.org/mac_rgeos_rgdal.html">here</a>.</p>
<h4 id="movement-ecology-in-r">Movement ecology in R</h4>
<p>For the analysis of animal tracking data, we often use functions from the adehabitat family which consists of four packages:</p>
<ul>
<li><code>adehabitatMA</code>: management of raster maps;</li>
<li><code>adehabitatLT</code>: analysis of trajectories;</li>
<li><code>adehabitatHR</code>: home range estimation;</li>
<li><code>adehabitatHS</code>: habitat selection analysis;</li>
<li><code>hab</code>: habitat selection and movement analyses.</li>
</ul>
<p>Other packages are also necessary for the workshop:</p>
<ul>
<li><code>sp</code>: spatial data in R;</li>
<li><code>raster</code>: special package for raster data;</li>
<li><code>lubridate</code>: management of dates/timestamps in R.</li>
</ul>
<p>Let’s install all necessary packages right now:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;adehabitatHS&quot;</span>, <span class="st">&quot;raster&quot;</span>, <span class="st">&quot;lubridate&quot;</span>))
<span class="kw">library</span>(<span class="st">&quot;devtools&quot;</span>)
<span class="kw">install_github</span>(<span class="st">&quot;basille/hab&quot;</span>)</code></pre>
<p>Loading the packages <code>hab</code>, <code>raster</code> and <code>lubridate</code> should show no error:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;hab&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;raster&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;lubridate&quot;</span>)</code></pre>
</body>
</html>
